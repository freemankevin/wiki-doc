---
title: 网络配置
description: Linux - 网络配置
published: true
date: 2026-01-30T02:58:02.953Z
tags: linux, redhat, centos, debian, ubuntu, network, 静态ip
editor: markdown
dateCreated: 2026-01-30T01:34:58.870Z
---

# 网络配置

> Linux 相关的 网络配置 问题收集
{.is-info}

---

## Red Hat 系列配置

> Red Hat 系列包括：CentOS、RHEL、Fedora 等
{.is-info}


### 编辑网络配置文件

**文件位置**：`/etc/sysconfig/network-scripts/ifcfg-[网卡名称]`

示例配置（假设网卡为 eth0）：

```bash
# 编辑网卡配置文件
sudo vi /etc/sysconfig/network-scripts/ifcfg-eth0
```

**配置内容示例**：

```
TYPE=Ethernet
BOOTPROTO=none
NAME=eth0
DEVICE=eth0
ONBOOT=yes
IPADDR=192.168.1.100
PREFIX=24
GATEWAY=192.168.1.1
DNS1=8.8.8.8
DNS2=8.8.4.4
```

**参数说明**：

- `TYPE=Ethernet`：网卡类型
- `BOOTPROTO=none`：不使用DHCP（静态配置）；若为 `dhcp` 则为动态获取
- `NAME`：网卡名称
- `DEVICE`：设备名称
- `ONBOOT=yes`：系统启动时自动启用该网卡
- `IPADDR`：IP地址
- `PREFIX`：子网掩码位数（24 表示 255.255.255.0）
- `GATEWAY`：默认网关
- `DNS1/DNS2`：DNS服务器地址

---

## Debian 系列配置

> Debian 系列包括：Ubuntu、Debian、Linux Mint 等
{.is-info}


### 编辑 Netplan 配置（Ubuntu 18.04+）

**文件位置**：`/etc/netplan/`（通常为 `.yaml` 文件）

```bash
# 查看现有配置
ls /etc/netplan/

# 编辑配置文件（通常为 01-netcfg.yaml 或类似）
sudo vi /etc/netplan/01-netcfg.yaml
```

**配置示例**：

```yaml
network:
  version: 2
  renderer: networkd  # 或 NetworkManager
  ethernets:
    eth0:
      dhcp4: no
      addresses:
        - 192.168.1.100/24
      gateway4: 192.168.1.1
      nameservers:
        addresses: [8.8.8.8, 8.8.4.4]
```

**应用配置**：

```bash
# 测试配置（检查语法）
sudo netplan try

# 永久应用配置
sudo netplan apply

# 验证配置
ip addr show eth0
```



---

## 配置多网卡和别名IP

### Red Hat 系列

创建网卡别名配置文件（eth0:1）：

```bash
sudo vi /etc/sysconfig/network-scripts/ifcfg-eth0:1
```

```
TYPE=Ethernet
BOOTPROTO=none
NAME=eth0:1
DEVICE=eth0:1
ONBOOT=yes
IPADDR=192.168.1.101
PREFIX=24
```

### Debian 系列（Netplan）

在同一网卡下添加多个地址：

```yaml
ethernets:
  eth0:
    dhcp4: no
    addresses:
      - 192.168.1.100/24
      - 192.168.1.101/24
    gateway4: 192.168.1.1
    nameservers:
      addresses: [8.8.8.8, 8.8.4.4]
```

---

## IPv6 配置

### Red Hat 系列

```
IPV6INIT=yes
IPV6ADDR=2001:db8::100/64
IPV6GATEWAY=2001:db8::1
```

### Debian 系列（Netplan）

```yaml
ethernets:
  eth0:
    dhcp4: no
    dhcp6: no
    addresses:
      - 192.168.1.100/24
      - 2001:db8::100/64
    gateway4: 192.168.1.1
    gateway6: 2001:db8::1
```

---

## 常见故障排查

### 无法连接网络

1. **检查配置文件语法**：
   ```bash
   # Netplan 验证
   sudo netplan try
   
   # 检查文件是否有错误
   sudo cat /etc/netplan/01-netcfg.yaml
   ```

2. **检查网卡状态**：
   ```bash
   ip link show eth0
   ```

3. **查看IP地址分配**：
   ```bash
   ip addr show eth0
   ```

4. **测试网络连接**：
   ```bash
   ping -c 4 192.168.1.1
   ```

### DNS 无法解析

1. **检查DNS配置**：
   ```bash
   cat /etc/resolv.conf
   ```

2. **测试DNS**：
   ```bash
   nslookup google.com
   dig google.com
   ```

3. **重启网络或DNS服务**：
   ```bash
   # Red Hat
   sudo systemctl restart NetworkManager
   
   # Debian
   sudo systemctl restart systemd-resolved
   ```

### 重新启动后配置丢失

- **Red Hat**：确保 `ONBOOT=yes`
- **Debian**：确保使用 `auto` 或正确的 Netplan 配置

---

## 查看和验证配置

### 查看当前网络配置

```bash
# 查看所有网卡
ip link show

# 查看IP地址
ip addr show

# 查看路由表
ip route show

# 查看DNS配置
cat /etc/resolv.conf

# 查看全部网络信息
nmcli device show eth0
```

### 测试网络连接

```bash
# 测试网关连接
ping -c 4 192.168.1.1

# 测试DNS
nslookup example.com

# 测试外部连接
ping -c 4 8.8.8.8
```

---

[返回 Linux](/linux)
